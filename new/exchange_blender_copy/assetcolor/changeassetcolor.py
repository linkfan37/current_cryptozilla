# -*- coding: utf-8 -*-
from PIL import Image as Image1
from pygltflib import GLTF2
from pygltflib.utils import ImageFormat, Image
import os
import json

path = "/home/flo/projekt/new/exchange_blender/assetcolor/variation/"
path2 = "/home/flo/projekt/new/exchange_blender/assetcolor/"
assetname1= "clown wig.png"
asset = assetname1.replace(".png","")
assetname2= asset + " shade.png"
assetnames = [assetname1,assetname2]
asseturi1 = "data:image/png;base64,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"
asseturi2 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAACGklEQVR42u3cSVLDMBBA0b4lt2fJNWAHCyZb1tAtvVflHQmJ8suW5EBExHuiIxb8viveEx7dCEAAxwZQ9TWVCCAEIAAB9P0ABZAwgCtjOuKzWhpAywusFMCTMSpn1hsTQPEAZg36rGvqnccLoEAAWeYyAhDA/gE8maXenUEL4JAzQNZDAI6v4/Xl7fMQgAAEMGF5VvGSIYBDAwgBmDAKYNHsPAQgAAEIQACzAxi5m7gygBV3TAWwIICeY1TPP5sas+/hx83BFYAApnx3b6tTvgAEkGIO8PTrVwIoHECv660ANjgDtD6XAAQggBkBXBkAAWy8ChCAALYKIAQggKc3nba0KoCe265XbuYIYGIAI1clrc8ZHcM6dxl44duxv/78H48bNZE77h6/AASQK4CfHiuAAwN4sOIQwC5ngBsTLh96kQBaf0/PAJgQwLcNpBsBrFwGcnfAO53i/U8+AQhgyzmAAAQgAAEc8edeAhCAAGYO5IgAWvYj7AMMGPAMATA5gCevJ8MlQACTB1oAAhBA9gBGxCMAAQjg5ACy7gwK4LAALAM3uDcQAhCAAB4EEEUC+O09hMtCrgBaz0ICOOgM0LIMFIAABLAigCwbQQIQwJAArAIKBxACOOdewKgAbAUnWfcLQAACWBXCikgEUDiAHsEIoPAlY1QAVyMddZkDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAVh+PzjZ8c3H7TQAAAABJRU5ErkJggg=="
asset = assetname1.replace('.png','')
for assetname in assetnames:
    image = Image1.open(path2 + assetname)
    print(image)
    print(image.mode)
    rgba=image.convert("RGBA")
    datas = rgba.getdata()

    DarkPink = []
    Pink = []
    Cream = []
    Crocodile = []
    DarkCyan = []
    DarkPurple = []
    Fire=[]
    Grayscale=[]
    HunterGreen =[]
    Independance_blue = []
    Kelly_green = []
    Light_orange = []
    Light_purple=[]
    Orange = []
    Pale_Green = []
    Persian = []
    Pidgeon_Blue = []
    Red = []
    Violet = []
    Blue = []
    print(datas)
    for item in datas:
        if(item[0] == 86 and item[1]==82 and item[2]==159 and item[3]==255): #normal skin //piink normal
            DarkPink.append((255, 85, 170, 255))
            Pink.append((255,127,170,255))
            Cream.append((224,177,175,255))
            Crocodile.append((87,86,59,255))
            DarkCyan.append((0,85,85,255))
            DarkPurple.append((85,85,170,255))
            Fire.append((170,85,85,255))
            Grayscale.append((105,105,105,255))
            HunterGreen.append((85,170,85,255))
            Independance_blue.append((101,85,116,255))
            Kelly_green.append((0,170,0,255))
            Light_orange.append((255,170,0,255))
            Light_purple.append((170,85,255,255))
            Orange.append((255,149,0,255))
            Pale_Green.append((85,255,170,255))
            Persian.append((0,170,170,255))
            Pidgeon_Blue.append((85,93,116,255))
            Red.append((170,0,0,255))
            Violet.append((85,85,170,255))
            Blue.append((85,85,255,255))
        elif(item[0] == 79 and item[1]==72 and item[2]==148 and item[3]==255):#darker skin //normal-20
            DarkPink.append((235, 65, 150, 255))
            Pink.append((235,107,150,255))
            Cream.append((204,157,155,255))
            Crocodile.append((67,66,39,255))
            DarkCyan.append((0,65,65,255))
            DarkPurple.append((65,65,150,255))
            Fire.append((150,65,65,255))
            Grayscale.append((85,85,85,255))
            HunterGreen.append((65,150,65,255))
            Independance_blue.append((81,65,96,255))
            Kelly_green.append((0,150,0,255))
            Light_orange.append((235,150,0,255))
            Light_purple.append((150,65,235,255))
            Orange.append((235,129,0,255))
            Pale_Green.append((65,235,150,255))
            Persian.append((0,150,150,255))
            Pidgeon_Blue.append((65,73,96,255))
            Red.append((150,0,0,255))
            Violet.append((65,65,150,255))
            Blue.append((75,75,245,255))
        elif(item[0] == 69 and item[1]==201 and item[2]==186 and item[3]==255):#belly
            DarkPink.append((255, 218, 236, 255))
            Pink.append((255,255,255,255))
            Cream.append((255,255,255,255))
            Crocodile.append((255,170,221,255))
            DarkCyan.append((170,255,170,255))
            DarkPurple.append((255,255,170,255))
            Fire.append((255,255,85,255))
            Grayscale.append((255,255,255,255))
            HunterGreen.append((255,255,255,255))
            Independance_blue.append((170,255,255,255))
            Kelly_green.append((255,255,170,255))
            Light_orange.append((255,255,170,255))
            Light_purple.append((255,255,170,255))
            Orange.append((255,255,170,255))
            Pale_Green.append((255,255,255,255))
            Persian.append((255,255,170,255))
            Pidgeon_Blue.append((255,255,170,255))
            Red.append((255,170,85,255))
            Violet.append((170,255,255,255))
            Blue.append((186,255,210,255))
        elif(item[0] == 67 and item[1]==94 and item[2]==187 and item[3]==255):#berfore belly
            DarkPink.append((255, 170, 170, 255))
            Pink.append((255,212,170,255))
            Cream.append((255,242,219,255))
            Crocodile.append((224,164,159,255))
            DarkCyan.append((0,176,147,255))
            DarkPurple.append((255,170,255,255))
            Fire.append((255,217,0,255))
            Grayscale.append((222,222,222,255))
            HunterGreen.append((255,255,170,255))
            Independance_blue.append((159,180,224,255))
            Kelly_green.append((187,239,0,255))
            Light_orange.append((255,255,0,255))
            Light_purple.append((224,194,255,255))
            Orange.append((255,227,118,255))
            Pale_Green.append((255,255,187,255))
            Persian.append((85,255,170,255))
            Pidgeon_Blue.append((159,224,218,255))
            Red.append((255,110,110,255))
            Violet.append((85,164,170,255))
            Blue.append((138,212,255,255))
        elif(item[0] == 234 and item[1]==219 and item[2]==206 and item[3]==255):#theeth
            DarkPink.append(item)
            Pink.append(item)
            Cream.append(item)
            Crocodile.append(item)
            DarkCyan.append(item)
            DarkPurple.append(item)
            Fire.append(item)
            Grayscale.append((item))
            HunterGreen.append(item)
            Independance_blue.append(item)
            Kelly_green.append(item)
            Light_orange.append(item)
            Light_purple.append(item)
            Orange.append(item)
            Pale_Green.append(item)
            Persian.append(item)
            Pidgeon_Blue.append(item)
            Red.append(item)
            Violet.append(item)
            Blue.append(item)
        elif(item[0] == 0 and item[1]==0 and item[2]==0 and item[3]==0):#transparent
            DarkPink.append(item)
            Pink.append(item)
            Cream.append(item)
            Crocodile.append(item)
            DarkCyan.append(item)
            DarkPurple.append(item)
            Fire.append(item)
            Grayscale.append(item)
            HunterGreen.append(item)
            Independance_blue.append(item)
            Kelly_green.append(item)
            Light_orange.append(item)
            Light_purple.append(item)
            Orange.append(item)
            Pale_Green.append(item)
            Persian.append(item)
            Pidgeon_Blue.append(item)
            Red.append(item)
            Violet.append(item)
            Blue.append(item)
        elif(item[0] == 222 and item[1]==87 and item[2]==230 and item[3]==255):#topspikes
            DarkPink.append((0, 170, 85, 255))
            Pink.append((152,106,170,255))
            Cream.append((255,175,85,255))
            Crocodile.append((170,91,85,255))
            DarkCyan.append((255,170,0,255))
            DarkPurple.append((88,43,185,255))
            Fire.append((85,85,170,255))
            Grayscale.append((99,99,99,255))
            HunterGreen.append((0,115,85,255))
            Independance_blue.append((85,113,170,255))
            Kelly_green.append((0,85,85,255))
            Light_orange.append((255,170,0,255))
            Light_purple.append((0,142,85,255))
            Orange.append((0,170,255,255))
            Pale_Green.append((255,168,151,255))
            Persian.append((170,85,85,255))
            Red.append((255,135,0,255))
            Pidgeon_Blue.append((255,132,0,255))
            Violet.append((170,0,170,255))
            Blue.append((168,64,113,255))
        elif(item[0] == 77 and item[1]==32 and item[2]==104 and item[3]==255):#bottomspikes
            DarkPink.append((0, 102, 85, 255))
            Pink.append((86,84,170,255))
            Cream.append((255,85,85,255))
            Crocodile.append((87,86,59,255))
            DarkCyan.append((255,85,0,255))
            DarkPurple.append((85,0,85,255))
            Fire.append((85,0,170,255))
            Grayscale.append((64,64,64,255))
            HunterGreen.append((0,85,85,255))
            Independance_blue.append((66,88,132,255))
            Kelly_green.append((0,106,0,255))
            Light_orange.append((170,85,0,255))
            Light_purple.append((0,85,85,255))
            Orange.append((0,85,255,255))
            Pale_Green.append((255,85,170,255))
            Persian.append((85,85,85,255))
            Pidgeon_Blue.append((66,132,125,255))
            Red.append((255,85,0,255))
            Violet.append((85,0,170,255))
            Blue.append((112,42,84,255))
        elif(item[0] == 90 and item[1]==47 and item[2]==123 and item[3]==255):#also bottomspikes? lol
            DarkPink.append((0, 102, 85, 255))
            Pink.append((86,84,170,255))
            Cream.append((255,85,85,255))
            Crocodile.append((132,70,66,255))
            DarkCyan.append((255,85,0,255))
            DarkPurple.append((85,0,85,255))
            Fire.append((85,0,170,255))
            Grayscale.append((64,64,64,255))
            HunterGreen.append((0,85,85,255))
            Independance_blue.append((66,88,132,255))
            Kelly_green.append((0,106,0,255))
            Light_orange.append((170,85,0,255))
            Light_purple.append((0,85,85,255))
            Orange.append((0,85,255,255))
            Pale_Green.append((255,85,170,255))
            Persian.append((85,85,85,255))
            Pidgeon_Blue.append((66,132,125,255))
            Red.append((255,85,0,255))
            Violet.append((85,0,170,255))
            Blue.append((112,42,84,255))
        elif(item[0] == 36 and item[1]==30 and item[2]==23 and item[3]==255):# nearly black
            DarkPink.append(item)
            Pink.append(item)
            Cream.append(item)
            Crocodile.append(item)
            DarkCyan.append(item)
            DarkPurple.append(item)
            Fire.append(item)
            Grayscale.append(item)
            HunterGreen.append(item)
            Independance_blue.append(item)
            Kelly_green.append(item)
            Light_orange.append(item)
            Light_purple.append(item)
            Orange.append(item)
            Pale_Green.append(item)
            Persian.append(item)
            Pidgeon_Blue.append(item)
            Red.append(item)
            Violet.append(item)
            Blue.append(item)
        elif(item[0] == 105 and item[1]==22 and item[2]==22 and item[3]==255):# mouth intern
            DarkPink.append(item)
            Pink.append(item)
            Cream.append(item)
            Crocodile.append(item)
            DarkCyan.append(item)
            DarkPurple.append(item)
            Fire.append(item)
            Grayscale.append(item)
            HunterGreen.append(item)
            Independance_blue.append(item)
            Kelly_green.append(item)
            Light_orange.append(item)
            Light_purple.append(item)
            Orange.append(item)
            Pale_Green.append(item)
            Persian.append(item)
            Pidgeon_Blue.append(item)
            Red.append(item)
            Violet.append(item)
            Blue.append(item)
        else:
            DarkPink.append(item)
            Pink.append(item)
            Cream.append(item)
            Crocodile.append(item)
            DarkCyan.append(item)
            DarkPurple.append(item)
            Fire.append(item)
            Grayscale.append(item)
            HunterGreen.append(item)
            Independance_blue.append(item)
            Kelly_green.append(item)
            Light_orange.append(item)
            Light_purple.append(item)
            Orange.append(item)
            Pale_Green.append(item)
            Persian.append(item)
            Pidgeon_Blue.append(item)
            Red.append(item)
            Violet.append(item)
            Blue.append(item)
            print(item)

    rgba.putdata(DarkPink)
    rgba.save(path+"dark pink/"+ assetname, "PNG")
    rgba.putdata(Pink)
    rgba.save(path+"pink/"+assetname, "PNG")
    rgba.putdata(Cream)
    rgba.save(path+"cream/"+assetname, "PNG")
    rgba.putdata(Crocodile)
    rgba.save(path+"crocodile/"+assetname, "PNG")
    rgba.putdata(DarkCyan)
    rgba.save(path+"dark cyan/"+assetname, "PNG")
    rgba.putdata(DarkPurple)
    rgba.save(path+"dark purple/"+assetname, "PNG")
    rgba.putdata(Fire)
    rgba.save(path+"fire/"+assetname, "PNG")
    rgba.putdata(Grayscale)
    rgba.save(path+"grayscale/"+assetname, "PNG")
    rgba.putdata(HunterGreen)
    rgba.save(path+"hunter green/"+assetname, "PNG")
    rgba.putdata(Independance_blue)
    rgba.save(path+"independance blue/"+assetname, "PNG")
    rgba.putdata(Kelly_green)
    rgba.save(path+"kelly green/"+assetname, "PNG")
    rgba.putdata(Light_orange)
    rgba.save(path+"light orange/"+assetname, "PNG")
    rgba.putdata(Light_purple)
    rgba.save(path+"light purple/"+assetname, "PNG")
    rgba.putdata(Orange)
    rgba.save(path+"orange/"+assetname, "PNG")
    rgba.putdata(Pale_Green)
    rgba.save(path+"pale green/"+assetname, "PNG")
    rgba.putdata(Persian)
    rgba.save(path+"persian green/"+assetname, "PNG")
    rgba.putdata(Pidgeon_Blue)
    rgba.save(path+"pigeon blue/"+assetname, "PNG")
    rgba.putdata(Red)
    rgba.save(path+"red/"+assetname, "PNG")
    rgba.putdata(Violet)
    rgba.save(path+"violet/"+assetname, "PNG")
    rgba.putdata(Blue)
    rgba.save(path+"blue/"+assetname, "PNG")

colorlist= ["light orange","pale green","blue","fire","independance blue","light purple","grayscale","pink","dark cyan","red","persian green","orange","pigeon blue","dark pink","kelly green","violet","dark purple","cream","crocodile","hunter green"]
for color in colorlist:
    fullPath = path +color+ "/"+ assetname1
    gltf = GLTF2()
    image = Image()
    image.uri = fullPath
    gltf.images.append(image)
    gltf.convert_images(ImageFormat.DATAURI)
    exchangeuri1 = gltf.images[0].uri  # will now be something like "data:image/png;base64,iVBORw0KGg..."
    gltf.images[0].name  # will be myfile.png

    fullPath = path +color+ "/"+ assetname2
    gltf = GLTF2()
    image = Image()
    image.uri = fullPath
    gltf.images.append(image)
    gltf.convert_images(ImageFormat.DATAURI)
    exchangeuri2 = gltf.images[0].uri  # will now be something like "data:image/png;base64,iVBORw0KGg..."
    gltf.images[0].name  # will be myfile.png

    f = open(path2+asset+'.gltf', 'r')
    f2 = open(path+color+'/'+asset+'.gltf', 'w')
    i = 0
    while True:
        line = f.readline()
        print(i)
        if asseturi1 in line:
            line = line.replace(asseturi1,exchangeuri1)
        if asseturi2 in line:
            line = line.replace(asseturi2,exchangeuri2)
        
        if not line:
            break
        f2.write(line)
        i = i +1
    f.close()
    f2.close()